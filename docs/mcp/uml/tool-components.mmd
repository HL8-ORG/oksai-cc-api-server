%% 工具层组件图
classDiagram
    class BaseMcpTool {
        <<工具基类>>
        name: string
        description: string

        getToolDefinition(): McpToolDefinition
        execute(args: Record~string, unknown~): Promise~McpToolResult~

        + createSuccessResult(content: unknown): McpToolResult
        + createErrorResult(message: string): McpServerResult
    }

    class ToolRegistry {
        - tools: Map~string, BaseMcpTool~
        - mcpServer: Server

        + registerTool(tool: BaseMcpTool): void
        + getTool(name: string): BaseMcpTool | null
        + getAllTools(): BaseMcpTool[]
        + getToolCount(): number
        + invokeTool(name: string, args: Record~string, unknown~): Promise~McpToolResult~

        - setMcpServer(server: Server): void
        + getMcpServer(): Server
    }

    BaseMcpTool <|-- ToolRegistry: 注册到
