# OKSAI 平台文档

## 📖 文档导航

本文档为 OKSAI 平台开发者提供完整的开发指南和参考资料。请根据您的需求查阅相应的文档。

## 📑 文档目录

-   [快速开始](#快速开始)
-   [核心文档](#核心文档)
-   [适用人群](#适用人群)
-   [文档贡献指南](#文档贡献指南)
-   [常见问题索引](#常见问题索引)

---

## 快速开始

### 新手开发者

如果您是第一次接触 OKSAI 平台，建议按以下顺序阅读文档：

```mermaid
graph LR
    A[阅读项目概览] --> B[搭建开发环境]
    B --> C[学习代码规范]
    C --> D[开始开发]
```

1. **[项目概览](./PROJECT_OVERVIEW.md)** - 了解项目背景、目标和整体架构
2. **[开发指南](./DEVELOPMENT_GUIDE.md)** - 搭建开发环境并熟悉项目结构
3. **[代码规范](./CODING_STANDARDS.md)** - 掌握代码编写规范和最佳实践
4. **[技术架构](./ARCHITECTURE.md)** - 深入了解技术架构设计
5. **[测试指南](./TESTING_GUIDE.md)** - 学习如何编写测试
6. **[API 参考](./API_REFERENCE.md)** - 查阅 API 接口文档

### 有经验的开发者

如果您已经熟悉 NestJS 和 MikroORM，可以直接查阅：

-   **[项目概览 - 核心功能模块](./PROJECT_OVERVIEW.md#24-核心功能模块)** - 快速了解平台功能
-   **[代码规范 - 核心原则](./CODING_STANDARDS.md#核心原则)** - 遵循项目代码规范
-   **[开发指南 - 常用命令](./DEVELOPMENT_GUIDE.md#44-常用开发命令)** - 快速开始开发
-   **[技术架构 - 模块架构](./ARCHITECTURE.md#模块架构)** - 了解模块设计
-   **[测试指南 - 单元测试](./TESTING_GUIDE.md#单元测试)** - 学习如何编写单元测试
-   **[API 参考 - 认证模块 API](./API_REFERENCE.md#认证模块-api)** - 查阅认证 API

---

## 核心文档

### [PROJECT_OVERVIEW.md - 项目概览](./PROJECT_OVERVIEW.md)

详细介绍 OKSAI 平台的背景、目标、技术架构和核心功能模块。

**主要内容：**

-   项目简介与愿景
-   项目目标（基于 backup 目录的代码简化）
-   技术架构概览（MonoRepo 架构、技术栈清单）
-   核心功能模块（认证、租户、用户、组织、权限、审计、插件）
-   项目特色与现状

**阅读时间：** 约 30 分钟

### [CODING_STANDARDS.md - 代码规范](./CODING_STANDARDS.md)

基于 AGENTS.md 的完整代码编写规范，确保代码质量和一致性。

**主要内容：**

-   核心原则（中文优先、代码即文档）
-   导入顺序和风格
-   格式化规则
-   TypeScript 类型定义
-   TSDoc 注释规范
-   业务语义注释规范
-   命名规范
-   错误处理规范
-   依赖注入规范
-   服务层模式
-   控制器层模式
-   实体定义规范
-   模块定义规范
-   测试规范
-   最佳实践

**阅读时间：** 约 45 分钟

### [DEVELOPMENT_GUIDE.md - 开发指南](./开发指南)

提供完整的开发环境搭建、工作流程和常用命令指导。

**主要内容：**

-   环境搭建
-   项目结构详解
-   开发工作流程
-   常用开发命令
-   创建新模块指南
-   从 backup 复用代码指南
-   开发配置
-   调试技巧
-   Git 工作流
-   常见问题

**阅读时间：** 约 40 分钟

---

## 第二优先级文档

### [ARCHITECTURE.md - 技术架构](./ARCHITECTURE.md)

详细的技术架构文档，包含 MonoRepo 架构、模块架构、数据库架构、认证架构、多租户架构、权限控制架构、插件系统架构、审计系统架构、消息队列架构、API 网关架构、缓存架构、监控和日志架构、部署架构。

**阅读时间：** 约 60 分钟

### [API_REFERENCE.md - API 参考](./API_REFERENCE.md)

完整的 API 接口文档，包含所有模块的 API 端点、请求参数、响应示例和错误码说明。

**阅读时间：** 约 90 分钟

### [TESTING_GUIDE.md - 测试指南](./TESTING_GUIDE.md)

完整的测试指南，包含单元测试、集成测试、端到端测试的详细说明和示例。

**主要内容：**

-   测试概述（测试重要性、测试策略、测试覆盖率要求）
-   单元测试（测试文件位置、测试框架、测试示例、测试最佳实践）
-   集成测试（测试文件位置、测试框架、测试示例、测试最佳实践）
-   端到端测试（测试文件位置、测试框架、测试示例、测试最佳实践）
-   测试命令（运行所有测试、运行指定包的测试、运行单个测试文件、监听模式、生成覆盖率报告）
-   测试工具（Jest、Supertest、测试替身）
-   测试 CI/CD（持续集成、测试报告、测试失败处理）
-   常见问题（测试相关、覆盖率相关、CI/CD 相关）

**阅读时间：** 约 50 分钟

---

## 第三优先级文档

### [DEPLOYMENT_GUIDE.md - 部署指南](./DEPLOYMENT_GUIDE.md)

完整的部署指南，包含环境配置、容器化部署、数据库部署、应用部署、监控和日志、水平扩展、高可用设计、持续集成和部署、性能优化、安全配置等。

**主要内容：**

-   部署概述（部署环境、部署策略、部署流程）
-   环境配置（开发环境、测试环境、生产环境）
-   容器化部署（Docker 构建、Docker Compose、Kubernetes 部署）
-   数据库部署（PostgreSQL 部署、MongoDB 部署、数据库迁移）
-   应用部署（构建应用、启动应用、健康检查）
-   监控和日志（日志收集、指标监控、告警配置）
-   水平扩展（无状态设计、负载均衡、自动扩展）
-   高可用设计（冗余部署、故障转移、数据备份、灾备恢复）
-   持续集成和部署（CI/CD 流程、自动化部署、回滚策略）
-   性能优化（应用优化、数据库优化、缓存优化、网络优化）
-   安全配置（网络安全、数据安全、认证安全、审计日志）
-   常见问题（部署相关、性能相关、安全相关）

**阅读时间：** 约 60 分钟

### [PLUGIN_DEVELOPMENT.md - 插件开发指南](./PLUGIN_DEVELOPMENT.md)

完整的插件开发指南，包含插件系统概述、创建插件、插件开发最佳实践、插件示例、插件通信、插件热加载、现有插件参考、插件发布等。

**主要内容：**

-   插件系统概述（插件系统架构、插件生命周期、插件依赖管理）
-   创建插件（创建插件目录、定义插件接口、实现插件逻辑、注册插件）
-   插件开发最佳实践（插件设计原则、插件测试、插件文档、插件版本管理）
-   插件示例（Hello World 插件、数据插件、API 插件、集成插件）
-   插件通信（事件机制、服务调用、数据共享）
-   插件热加载（热加载机制、热加载配置、热加载最佳实践）
-   现有插件参考（集成类插件、业务功能插件、插件参考代码）
-   插件发布（插件打包、插件发布到 npm、插件发布到私有仓库）
-   常见问题（开发相关、测试相关、部署相关）

**阅读时间：** 约 40 分钟

### [DATABASE_SCHEMA.md - 数据库模型](./DATABASE_SCHEMA.md)

完整的数据库模型文档，包含数据库设计概述、核心实体、实体关系、索引设计、数据迁移、数据库优化、数据库备份、数据库监控等。

**主要内容：**

-   数据库设计概述（数据库设计原则、数据库类型、数据库选择策略）
-   核心实体（BaseEntity、Tenant、User、Organization、Role、Permission）
-   实体关系（租户与用户、租户与组织、租户与角色、用户与角色、角色与权限）
-   索引设计（单列索引、复合索引、唯一索引、索引优化策略）
-   数据迁移（迁移策略、迁移命令、迁移最佳实践）
-   数据库优化（查询优化、连接池优化、缓存优化、分区优化）
-   数据库备份（备份策略、备份命令、恢复策略）
-   数据库监控（性能监控、日志监控、告警配置）
-   常见问题（设计相关、迁移相关、优化相关）

**阅读时间：** 约 50 分钟

### [FAQ.md - 常见问题](./FAQ.md)

完整的常见问题文档，包含项目相关、开发相关、部署相关、测试相关、性能相关、安全相关、插件开发相关、API 相关、数据库相关、故障排查等。

**主要内容：**

-   项目相关
-   开发相关
-   部署相关
-   测试相关
-   性能相关
-   安全相关
-   插件开发相关
-   API 相关
-   数据库相关
-   故障排查

**阅读时间：** 约 20 分钟

---

## 适用人群

### 前端开发者

如果您是前端开发者，建议重点关注：

-   [项目概览 - 技术架构概览](./PROJECT_OVERVIEW.md#23-技术架构概览)
-   [开发指南 - 环境搭建](./DEVELOPMENT_GUIDE.md#41-环境搭建)
-   [开发指南 - 常用开发命令](./DEVELOPMENT_GUIDE.md#44-常用开发命令)

### 后端开发者

如果您是后端开发者，建议重点关注：

-   [项目概览 - 技术架构概览](./PROJECT_OVERVIEW.md#23-技术架构概览)
-   [项目概览 - 核心功能模块](./PROJECT_OVERVIEW.md#24-核心功能模块)
-   [代码规范](./CODING_STANDARDS.md)
-   [开发指南](./DEVELOPMENT_GUIDE.md)

### 全栈开发者

如果您是全栈开发者，建议完整阅读所有核心文档。

---

## 文档贡献指南

我们欢迎社区成员为文档做出贡献。在提交文档变更前，请遵循以下指南：

### 文档编写规范

1. **语言风格**

    - 使用正式的书面中文
    - 避免口语化表达
    - 保持客观、准确的描述

2. **文档结构**

    - 使用清晰的标题层级（Markdown 格式）
    - 添加目录（TOC）和锚点链接
    - 使用表格、列表等格式化工具提升可读性

3. **代码示例**

    - 使用简洁的代码片段
    - 确保代码符合项目代码规范
    - 添加必要的中文注释

4. **图表使用**
    - 适当使用 Mermaid 图表（架构图、流程图、ERD 等）
    - 确保图表清晰易懂
    - 为图表添加必要的说明

### 文档提交流程

1. Fork 项目仓库
2. 创建新的分支（`docs/your-topic`）
3. 在 `docs/` 目录下修改或创建文档
4. 提交 Pull Request，并详细描述变更内容

---

## 常见问题索引

### 环境搭建相关

-   [如何搭建开发环境？](./DEVELOPMENT_GUIDE.md#41-环境搭建)
-   [如何配置数据库？](./DEVELOPMENT_GUIDE.md#47-开发配置)
-   [如何配置 OAuth 认证？](./DEVELOPMENT_GUIDE.md#47-开发配置)

### 开发流程相关

-   [如何创建新的模块？](./DEVELOPMENT_GUIDE.md#45-创建新模块指南)
-   [如何从 backup 复用代码？](./DEVELOPMENT_GUIDE.md#46-从-backup-复用代码指南)
-   [如何编写单元测试？](./CODING_STANDARDS.md#314-测试规范)

### 代码规范相关

-   [导入顺序是什么？](./CODING_STANDARDS.md#32-导入顺序和风格)
-   [如何编写 TSDoc 注释？](./CODING_STANDARDS.md#35-tsdoc-注释规范)
-   [错误消息应该如何编写？](./CODING_STANDARDS.md#38-错误处理规范)

### 部署相关

-   [如何构建生产版本？](./DEVELOPMENT_GUIDE.md#49-git-工作流)
-   [如何配置生产环境？](./DEVELOPMENT_GUIDE.md#47-开发配置)

---

## 联系方式

如果您在阅读文档或开发过程中遇到问题，可以通过以下方式寻求帮助：

-   提交 Issue：[GitHub Issues](https://github.com/oksais/platform/issues)
-   加入讨论：[GitHub Discussions](https://github.com/oksais/platform/discussions)
-   查看项目 AGENTS.md：[AGENTS.md](../AGENTS.md)

---

## 文档版本信息

-   **文档版本：** 1.0.0
-   **最后更新：** 2026-02-04
-   **维护者：** OKSAI 平台团队

---

## 更新日志

### v1.2.0 (2026-02-04)

-   📚 添加部署指南文档
-   📚 添加插件开发指南文档
-   📚 添加数据库模型文档
-   📚 添加常见问题文档
-   ✨ 完善文档导航，添加第三优先级文档索引

### v1.1.0 (2026-02-04)

-   📚 添加技术架构文档
-   📚 添加 API 参考文档
-   📚 添加测试指南文档
-   ✨ 完善文档导航，添加第二优先级文档索引

### v1.0.0 (2026-02-04)

-   ✨ 初始版本发布
-   📚 添加项目概览文档
-   📚 添加代码规范文档
-   📚 添加开发指南文档
-   📚 添加文档导航（README）
